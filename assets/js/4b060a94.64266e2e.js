"use strict";(self.webpackChunkaniapi_docs=self.webpackChunkaniapi_docs||[]).push([[788],{3633:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(5861),r=n(7757),i=n.n(r),c=n(7294),s=n(3575),l={sideItem:"sideItem_1iOb",selected:"selected_mwOX",panel:"panel_Gcan",visible:"visible_DLUC",client:"client_Y6xZ",clientRow:"clientRow_G1n1",inputLabel:"inputLabel_Chb7",errors:"errors_zfL6"};function u(){var e,t=(0,c.useState)([]),n=t[0],r=t[1],u=(0,c.useState)([]),o=u[0],d=u[1],p=(0,c.useState)(-1),m=p[0],f=p[1],h=(0,c.useState)(""),v=h[0],b=h[1],E=(0,c.useState)(-1),y=E[0],x=E[1],k=(0,c.useState)(""),N=k[0],g=k[1],_=(0,c.useState)(""),w=_[0],L=_[1],C=(0,c.useState)(""),R=C[0],T=C[1],S=(0,c.useState)([]),I=S[0],A=S[1],j=(0,c.useState)(!1),U=j[0],H=j[1];(0,c.useEffect)((0,a.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r(document.getElementsByClassName(l.sideItem)),d(document.getElementsByClassName(l.panel)),e=JSON.parse(window.localStorage.getItem("AUTH_USER")),f(e.id),b(e.access_token)}catch(n){window.location.replace("/login")}case 1:case"end":return t.stop()}}),t)}))),[]),(0,c.useEffect)((0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)}))),[m]),(0,c.useEffect)((function(){for(var e=0;e<n.length;e++)n[e].removeEventListener("click",Z,!0),n[e].addEventListener("click",Z,!0);var t=location.hash.substr(1);t&&(B(t),O(t))}),[n,o]);var M=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,a,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.aniapi.com/v1/oauth_client?user_id="+m,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(200===(n=e.sent).status_code){e.next=8;break}return e.abrupt("return");case 8:for(a=[],r=function(e){var t=n.data.documents[e];a.push(c.createElement("div",{key:e,className:l.client},c.createElement("h4",null,t.name),c.createElement("div",{className:l.clientRow},c.createElement("span",null,"Id"),t.client_id),c.createElement("div",{className:l.clientRow},c.createElement("span",null,"Redirect URI"),t.redirect_uri),U?c.createElement("button",{type:"button"},"..."):c.createElement("button",{type:"button",onClick:function(){return G(t.id)}},"Delete"),c.createElement("button",{type:"button",onClick:function(){x(t.id),g(t.name),L(t.redirect_uri),T(t.client_id),B("edit"),O("edit")}},"Edit")))},s=0;s<n.data.documents.length;s++)r(s);A(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){var t=e.target.getAttribute("data-panelid");B(t),O(t)},B=function(e){for(var t=0;t<n.length;t++)n[t].getAttribute("data-panelid")===e?n[t].classList.add(l.selected):n[t].classList.remove(l.selected)},O=function(e){for(var t=0;t<o.length;t++)o[t].getAttribute("data-panelid")===e?o[t].classList.add(l.visible):o[t].classList.remove(l.visible)},z=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),(t=document.getElementById("add-errors")).innerHTML="",N){e.next=7;break}return t.innerHTML+="Name must not be empty",H(!1),e.abrupt("return");case 7:if(w){e.next=11;break}return t.innerHTML+="Redirect URI must not be empty",H(!1),e.abrupt("return");case 11:return e.next=13,fetch("https://api.aniapi.com/v1/oauth_client",{method:"PUT",headers:{Authorization:"Bearer "+v,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:N,redirect_uri:w})});case 13:return n=e.sent,e.next=16,n.json();case 16:if(200!==(a=e.sent).status_code){e.next=28;break}return e.next=20,M();case 20:B("list"),O("list"),console.log("This is your "+N+" client's secret.\nYou won't be able to copy it in future times.\nSave it in a safe place!"),console.log(a.data.client_secret),alert("Check your console to copy the client's secret [F12]"),H(!1),e.next=31;break;case 28:return H(!1),t.innerHTML+=a.data,e.abrupt("return");case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),(t=document.getElementById("edit-errors")).innerHTML="",N){e.next=7;break}return t.innerHTML+="Name must not be empty",H(!1),e.abrupt("return");case 7:if(w){e.next=11;break}return t.innerHTML+="Redirect URI must not be empty",H(!1),e.abrupt("return");case 11:return e.next=13,fetch("https://api.aniapi.com/v1/oauth_client",{method:"POST",headers:{Authorization:"Bearer "+v,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:y,user_id:m,client_id:R,name:N,redirect_uri:w})});case 13:return n=e.sent,e.next=16,n.json();case 16:if(200!==(a=e.sent).status_code){e.next=25;break}return e.next=20,M();case 20:B("list"),O("list"),H(!1),e.next=28;break;case 25:return H(!1),t.innerHTML+=a.data,e.abrupt("return");case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)(i().mark((function e(t){var n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,fetch("https://api.aniapi.com/v1/oauth_client/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+v,Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(200!==(a=e.sent).status_code){e.next=15;break}return e.next=10,M();case 10:B("list"),O("list"),H(!1),e.next=18;break;case 15:return H(!1),alert(a.data),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.createElement(s.Z,{title:"Developer"},c.createElement("main",null,c.createElement("div",{className:"container margin-vert--lg"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col col--3"},c.createElement("h2",null,"Menu"),c.createElement("div",{className:l.sideItem+" "+l.selected,"data-panelid":"list"},"List"),c.createElement("div",{className:l.sideItem,"data-panelid":"add",onClick:function(){g(""),L("")}},"Add")),c.createElement("div",{className:"col col--7"},c.createElement("div",{className:l.panel+" "+l.visible,"data-panelid":"list"},c.createElement("h1",null,"List"),0===I.length?c.createElement("p",null,"No clients found"):c.createElement("div",{className:l.clients},I)),c.createElement("div",{className:l.panel,"data-panelid":"add"},c.createElement("h1",null,"Add"),c.createElement("form",{method:"post"},c.createElement("h4",{className:l.inputLabel},"Name"),c.createElement("input",{type:"text",placeholder:"Name",id:"add-name",onChange:function(e){return g(e.target.value)},value:N}),c.createElement("h4",{className:l.inputLabel},"Redirect URI"),c.createElement("input",{type:"text",placeholder:"Redirect URI",id:"add-reduri",onChange:function(e){return L(e.target.value)},value:w}),c.createElement("div",{id:"add-errors",className:l.errors}),U?c.createElement("button",{type:"button"},"..."):c.createElement("button",{type:"button",id:"add",onClick:z},"Add"))),c.createElement("div",{className:l.panel,"data-panelid":"edit"},c.createElement("h1",null,"Edit"),c.createElement("form",{method:"post"},c.createElement("h4",{className:l.inputLabel},"Name"),c.createElement("input",{type:"text",placeholder:"Name",id:"edit-name",onChange:function(e){return g(e.target.value)},value:N}),c.createElement("h4",{className:l.inputLabel},"Redirect URI"),c.createElement("input",{type:"text",placeholder:"Redirect URI",id:"edit-reduri",onChange:function(e){return L(e.target.value)},value:w}),c.createElement("div",{id:"edit-errors",className:l.errors}),U?c.createElement("button",{type:"button"},"..."):c.createElement("button",{type:"button",id:"edit",onClick:D},"Edit"))))))))}}}]);