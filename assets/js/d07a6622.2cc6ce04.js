"use strict";(self.webpackChunkaniapi_docs=self.webpackChunkaniapi_docs||[]).push([[43],{8951:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(5861),r=a(7757),l=a.n(r),c=a(7294),s=a(3575),i=a(2171),o="sideItem_62e1",u="selected_YDcF",m="panel_YE1q",d="visible_55wF",p="trackers_iIqb",h="tracker_w-zy",v="anilist_rhCX",E="mal_-jxb",f="trackerActive_ohsC",g="inputLabel_hQ1e",k="genres_EK9N",w="avatar_j1+G",_="errors_3Sac",b="success_9YFa";function N(){return function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}(128)}function y(){var e,t,a,r=(0,c.useState)(""),y=r[0],S=r[1],C=(0,c.useState)(-1),L=C[0],T=C[1],A=(0,c.useState)(""),x=A[0],j=A[1],H=(0,c.useState)(""),I=H[0],M=H[1],z=(0,c.useState)(""),U=z[0],B=z[1],J=(0,c.useState)(""),P=J[0],O=J[1],Z=(0,c.useState)(0),G=Z[0],R=Z[1],F=(0,c.useState)(""),W=F[0],Y=F[1],q=(0,c.useState)(""),D=q[0],K=q[1],Q=(0,c.useState)([]),X=Q[0],V=Q[1],$=(0,c.useState)(!1),ee=$[0],te=$[1];(0,c.useEffect)((0,n.Z)(l().mark((function n(){var r,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=document.getElementsByClassName(o),t=document.getElementsByClassName(m),a=JSON.parse(window.localStorage.getItem("AUTH_USER")),T(a.id),j(a.username),M(a.access_token),Y(a.localization),R(a.gender),K(a.avatar_tracker?a.avatar_tracker:"none"),n.next=12,ne();case 12:return n.next=14,ae();case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),window.location.replace("/login");case 19:for(r=0;r<e.length;r++)e[r].addEventListener("click",re,!0);(c=location.hash.substr(1))&&(le(c),ce(c)),a.has_anilist&&document.getElementById("anilist-tracker").classList.add(f),a.has_mal&&document.getElementById("mal-tracker").classList.add(f);case 24:case"end":return n.stop()}}),n,null,[[0,16]])}))),[]);var ae=function(){var e=(0,n.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=N(),S("https://myanimelist.net/v1/oauth2/authorize?response_type=code&client_id=747af82869e036215653a76eebe5e10a&state="+t+"&code_challenge="+t+"&code_challenge_method=plain"),window.localStorage.setItem("MAL_CHALLENGE",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,n.Z)(l().mark((function e(){var t,a,n,r,s,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.aniapi.com/v1/resources",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.next=8,fetch("https://api.aniapi.com/v1/resources/"+a.data+"/1",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 8:return n=e.sent,e.next=11,n.json();case 11:for(r=e.sent,s=[],i=0;i<r.data.localizations.length;i++)o=r.data.localizations[i],s.push(c.createElement("option",{key:i,value:o.i18n},o.label));V(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e){var t=e.target.getAttribute("data-panelid");le(t),ce(t)},le=function(t){for(var a=0;a<e.length;a++)e[a].getAttribute("data-panelid")===t?e[a].classList.add(u):e[a].classList.remove(u)},ce=function(e){for(var a=0;a<t.length;a++)t[a].getAttribute("data-panelid")===e?t[a].classList.add(d):t[a].classList.remove(d)},se=function(){var e=(0,n.Z)(l().mark((function e(){var t,a,n,r,c,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(!0),t=document.getElementById("success"),a=document.getElementById("errors"),n={},t.innerHTML="",a.innerHTML="",!U){e.next=12;break}if(U===P){e.next=11;break}return a.innerHTML+="Passwords must match",te(!1),e.abrupt("return");case 11:n.password=U;case 12:return W&&(n.localization=W),null!=G&&(n.gender=G),n.avatar_tracker=D,n.id=L,e.next=18,fetch("https://api.aniapi.com/v1/user",{method:"POST",headers:{Authorization:"Bearer "+I,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 18:return r=e.sent,e.next=21,r.json();case 21:if(200!==(c=e.sent).status_code){e.next=32;break}(s=JSON.parse(window.localStorage.getItem("AUTH_USER"))).gender=G,s.localization=W,s.avatar_tracker=D,window.localStorage.setItem("AUTH_USER",JSON.stringify(s)),t.innerHTML="Saved",te(!1),e.next=35;break;case 32:return te(!1),a.innerHTML+=c.data,e.abrupt("return");case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.createElement(s.Z,{title:"Profile"},c.createElement("main",null,c.createElement("div",{className:"container margin-vert--lg"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col col--3"},c.createElement("h2",null,"Menu"),c.createElement("div",{className:o+" "+u,"data-panelid":"jwt"},"JWT"),c.createElement("div",{className:o,"data-panelid":"edit"},"Edit"),c.createElement("div",{className:o,"data-panelid":"trackers"},"Trackers"),c.createElement("div",{className:o,onClick:function(){window.location.replace("/developer")}},"Developer"),c.createElement("div",{className:o,onClick:function(){window.localStorage.removeItem("AUTH_USER"),window.location.replace("/")}},"Logout")),c.createElement("div",{className:"col col--7"},c.createElement("div",{className:m+" "+d,"data-panelid":"jwt"},c.createElement("h1",null,"JWT"),c.createElement("p",null,"Hi ",c.createElement("b",null,x),", you can find your ",c.createElement("b",null,"JSON Web Token")," right below:"),c.createElement(i.Z,{className:"language-http"},I),c.createElement("p",null,"Remember to follow ",c.createElement("b",null,c.createElement("a",{href:"/docs/authentication",target:"_blank"},"Authentication"))," guidelines to use the token.")),c.createElement("div",{className:m,"data-panelid":"edit"},c.createElement("h1",null,"Edit"),c.createElement("form",{method:"post"},c.createElement("h4",{className:g},"Password"),c.createElement("input",{type:"password",placeholder:"Password",id:"password",autoComplete:"on",onChange:function(e){return B(e.target.value)},value:U}),c.createElement("h4",{className:g},"Confirm Password"),c.createElement("input",{type:"password",placeholder:"Confirm Password",id:"password-confirm",autoComplete:"on",onChange:function(e){return O(e.target.value)},value:P}),c.createElement("h4",{className:g},"Locale"),c.createElement("select",{id:"locales",onChange:function(e){return Y(e.target.value)},value:W},X),c.createElement("h4",{className:g},"Gender"),c.createElement("div",{className:k},c.createElement("label",null,"Unknown"),c.createElement("input",{type:"radio",name:"genre",id:"genre-unknown",value:0,checked:0===G,onChange:function(e){return R(0)}}),c.createElement("label",null,"Male"),c.createElement("input",{type:"radio",name:"genre",id:"genre-male",value:1,checked:1===G,onChange:function(e){return R(1)}}),c.createElement("label",null,"Female"),c.createElement("input",{type:"radio",name:"genre",id:"genre-female",value:2,checked:2===G,onChange:function(e){return R(2)}})),c.createElement("h4",{className:g},"Avatar"),c.createElement("div",{className:w},c.createElement("label",null,"None"),c.createElement("input",{type:"radio",name:"avatar",id:"avatar-none",value:"none",checked:"none"===D,onChange:function(e){return K("none")}}),c.createElement("label",null,"AniList"),c.createElement("input",{type:"radio",name:"avatar",id:"avatar-anilist",value:"anilist",checked:"anilist"===D,onChange:function(e){return K("anilist")}}),c.createElement("label",null,"MyAnimeList"),c.createElement("input",{type:"radio",name:"avatar",id:"avatar-mal",value:"mal",checked:"mal"===D,onChange:function(e){return K("mal")}})),c.createElement("div",{id:"errors",className:_}),ee?c.createElement("button",{type:"button"},"..."):c.createElement("button",{type:"button",id:"save-edit",onClick:se},"Save"),c.createElement("div",{id:"success",className:b}))),c.createElement("div",{className:m,"data-panelid":"trackers"},c.createElement("h1",null,"Trackers"),c.createElement("div",{className:p},c.createElement("a",{className:h+" "+v,id:"anilist-tracker",href:"https://anilist.co/api/v2/oauth/authorize?client_id=2185&response_type=token"},c.createElement("img",{src:"/img/anilist_logo.png"})),c.createElement("a",{className:h+" "+E,id:"mal-tracker",href:y},c.createElement("img",{src:"/img/mal_logo.jpg"})))))))))}}}]);