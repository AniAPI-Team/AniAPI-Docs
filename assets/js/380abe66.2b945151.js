"use strict";(self.webpackChunkaniapi_docs=self.webpackChunkaniapi_docs||[]).push([[137],{2351:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(5861),r=n(7757),o=n.n(r),c=n(7294),i=n(3575),s=n(6742),u="loginMain_aPRI",l="form_kMg2",p="errors_aGfq",d="signup_Oy8E";function m(){var e="6Lf98EgbAAAAAHSXXQIrsL-yByCMxOHsukzOqvHV",t=(0,c.useState)(""),n=t[0],r=t[1],m=(0,c.useState)(""),f=m[0],g=m[1],h=(0,c.useState)(!1),w=h[0],y=h[1];try{JSON.parse(window.localStorage.getItem("AUTH_USER"))&&window.location.replace("/profile")}catch(E){}(0,c.useEffect)((function(){!function(e,t,n){var a=document.getElementById(e);if(!a){var r=document.createElement("script");r.type="text/javascript",r.src=t,r.id=e,r.onload=function(){n&&n()},document.body.appendChild(r)}a&&n&&n()}("recaptcha-key","https://www.google.com/recaptcha/api.js?render="+e,(function(){}))}),[]);return c.createElement(i.Z,{title:"Login"},c.createElement("main",{className:u},c.createElement("div",{className:l},c.createElement("img",{src:"/img/aniapi_icon.png"}),c.createElement("form",{method:"post"},c.createElement("input",{type:"text",placeholder:"Email",id:"email",onChange:function(e){return r(e.target.value)},onKeyPress:function(e){13===e.which&&document.getElementById("password").focus(),r(n.toLowerCase())},value:n}),c.createElement("input",{type:"password",placeholder:"Password",id:"password",autoComplete:"on",onChange:function(e){return g(e.target.value)},onKeyPress:function(e){13===e.which&&document.getElementById("login").click()},value:f}),c.createElement("div",{id:"errors",className:p}),w?c.createElement("button",{type:"button"},"..."):c.createElement("button",{type:"button",id:"login",onClick:function(t){y(!0);var r=document.getElementById("errors");return r.innerHTML="",n?f?void window.grecaptcha.ready((function(){window.grecaptcha.execute(e,{action:"submit"}).then(function(){var e=(0,a.Z)(o().mark((function e(t){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.aniapi.com/v1/auth",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:n,password:f,g_recaptcha_response:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(200!==(c=e.sent).status_code){e.next=11;break}window.localStorage.setItem("AUTH_USER",JSON.stringify(c.data)),window.location.reload(),e.next=14;break;case 11:return r.innerHTML+=c.data,y(!1),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})):(r.innerHTML+="Password must not be empty",void y(!1)):(r.innerHTML+="Email must not be empty",void y(!1))}},"Login")),c.createElement(s.Z,{className:d,to:"/signup"},"Create an account"))))}}}]);